"use strict";window.character={el:document.querySelector(".character"),position:{x:0,y:0,maxX:0},walk:{isWalking:!1,isWalkingGamepad:!1,isKeyDown:!1,isSpeedTouchDown:!1,speed:"slow",direction:"right",sideChangeTime:0},jump:{isJumping:!1,lock:!1,jumpPos:0,max:30},timeouts:{stopWalking:null,startWalking:null},coins:{number:0,el:document.querySelector(".ui .coins")},score:{number:0,el:document.querySelector(".ui .score")},lives:3,fps:60};try{var canvas=document.createElement("canvas");canvas.width=100,canvas.height=100;var context=canvas.getContext("2d");context.fillStyle="transparent",context.fillRect(0,0,100,100),document.body.appendChild(canvas)}catch(e){}var isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);isMobile&&(character.fps=30);var enemyIndex=0;window.enemies=[],document.querySelectorAll(".enemy").forEach((function(e){e.dataset.index=enemyIndex,enemyIndex++,enemies.push({el:e,position:{x:e.dataset.positionx?parseFloat(e.dataset.positionx):0,y:e.dataset.positiony?parseFloat(e.dataset.positiony):0},walk:{isWalking:"true"===e.dataset.walking,direction:e.dataset.direction,changingDirection:!1},jump:{isJumping:!1,lock:!1,jumpPos:0,max:10},timeouts:{stopLack:null},isInVP:!1})}));
"use strict";character.currentFrame=0;var world=document.querySelector(".current-world");function update(){character.fps>60&&(character.fps=60),character.currentFrame<character.fps?character.currentFrame++:character.currentFrame=0;var e=60/character.fps*60,t=getCollisions(character.el),a=window.innerWidth/window.innerHeight*100;if(character.position.x-a/5>character.position.maxX&&character.position.maxX<world.dataset.width-a&&(character.position.maxX=character.position.x-a/5),world.style.marginLeft=-character.position.maxX+"vh",0===character.currentFrame||character.currentFrame===character.fps/2)for(var i in enemies)enemies[i].isInVP=isElementInViewport(enemies[i].el),enemies[i].isInVP||(enemies[i].el.classList.contains("in-lack-running")||getDistance(character.el,enemies[i].el)<0)&&enemies[i].el.remove();var n=function(){if(enemies[c].isInVP&&enemies[c].walk.isWalking&&!enemies[c].el.classList.contains("killed")){var a=getCollisions(enemies[c].el),i=e/300;enemies[c].el.classList.contains("in-lack")&&(i=0),enemies[c].el.classList.contains("in-lack-running")&&(i=e/55);var n=enemies[c].el.classList.contains("killing");if(n&&(i*=2.5,void 0===enemies[c].walk.dieDirection)){enemies[c].walk.dieDirection=1;var r=Math.random();enemies[c].walk.direction=r<.5?"right":"left"}for(var s=enemies[c],o=!0,l="right"===s.walk.direction?"left":"right",m=0;m<a.length;m++){var u=a[m];if(u.direction.x===s.walk.direction&&"y"===u.direction.must&&!u.isCharacterUpper){var h=!0;s.el.classList.contains("in-lack-running")&&u.element.classList.contains("enemy")&&(h=!1),s.walk.changingDirection||s.el.classList.contains("killing")||!h||(s.walk.direction=l,s.walk.changingDirection=!0,s.el.classList.contains("in-lack-running")&&playSound(4),setTimeout((function(){s.walk.changingDirection=!1}),25)),o=!1,u.element.classList.contains("in-lack-running")&&s.el.classList.contains("enemy")&&!s.el.classList.contains("killing")&&(s.el.classList.add("killing"),playSound(12),s.jump.isJumping=!0,addScore(100,getDistance(character.el,u.element,0,s))),s.el.classList.contains("in-lack-running")&&u.element.classList.contains("enemy")&&!u.element.classList.contains("killing")&&(u.element.classList.add("killing"),playSound(12),enemies[u.element.dataset.index].jump.isJumping=!0,addScore(100,getDistance(character.el,s.el),0,s))}}if(o&&(s.position.x+="right"===s.walk.direction?i:-i),s.jump.isJumping)if(s.el.classList.add("jump"),s.jump.jumpPos<s.jump.max){s.jump.lock=!0;var p=s.jump.jumpPos>15?e/s.jump.jumpPos/40:0,d=e/(70-s.jump.max)-s.jump.jumpPos/40-p;if(s.jump.jumpPos+=d,s.position.y+=d,s.jump.jumpPos>7)for(var g=0;g<t.length;g++)if("top"===t[g].direction.y&&"x"===t[g].direction.must){s.jump.isJumping=!1;break}}else s.jump.isJumping=!1;else if(s.position.y>0||n){var k=!0;if(!n)for(var f=0;f<a.length;f++)if("bottom"===a[f].direction.y&&"x"===a[f].direction.must){k=!1;break}if(k){var v=s.jump.jumpPos>15?e/s.jump.jumpPos/40:0,j=e/(70-s.jump.max)-s.jump.jumpPos/40-v;s.jump.jumpPos-=j,s.position.y-=j,s.jump.lock=!0}else s.position.y=6.66667*Math.round(s.position.y/6.66667),s.jump.jumpPos=0,s.jump.lock=!1}else s.jump.lock=!1,s.jump.isJumping=!1,s.jump.jumpPos=0,s.position.y<0&&(s.position.y=0),s.position.y=6.66667*Math.round(s.position.y/6.66667);var w="";n&&(w="rotate(180deg)"),"left"===enemies[c].walk.direction?enemies[c].el.style.transform="translate(".concat(parseFloat(enemies[c].position.x),"vh, ").concat(-parseFloat(enemies[c].position.y),"vh) ")+w:enemies[c].el.style.transform="translate(".concat(parseFloat(enemies[c].position.x),"vh, ").concat(-parseFloat(enemies[c].position.y),"vh) rotateY(-180deg) ")+w}};for(var c in enemies)n();if(character.jump.isJumping)if(character.el.classList.add("jump"),character.jump.jumpPos<character.jump.max){character.jump.lock=!0;var r=0;if(character.jump.jumpPos>15&&(r=e/character.jump.jumpPos/40),character.jump.jumpPos+=e/(70-character.jump.max)-character.jump.jumpPos/40-r,character.position.y+=e/(70-character.jump.max)-character.jump.jumpPos/40-r,character.jump.jumpPos>7){var s=function(e){if("top"===t[e].direction.y&&"x"===t[e].direction.must){character.jump.isJumping=!1;var a=t[e].element.classList.contains("block")&&!t[e].element.classList.contains("destroying");if(a||t[e].element.classList.contains("block-ques")){var i=!1,n=getCollisions(t[e].element),c=function(e){n[e].element.classList.contains("enemy")&&(n[e].element.classList.add("killing"),i=!0,playSound(12),enemies[n[e].element.dataset.index].jump.isJumping=!0,addScore(100,0,0,enemies[n[e].element.dataset.index]),setTimeout((function(){n[e].element.remove()}),2e3))};for(var r in n)c(r);if(t[e].element.dataset.coin&&t[e].element.dataset.coin>0)t[e].element.classList.add("hit-block-animation"),t[e].element.classList.add("coin-block-animation"),t[e].element.dataset.coin-=1,character.coins.number++,character.coins.number>99?(character.coins.number=0,character.lives++,playSound(0)):i||playSound(5),character.coins.el.textContent=character.coins.number.toString().padStart(2,"0"),addScore(200),0==t[e].element.dataset.coin&&t[e].element.classList.add("block-empty");else if(0==t[e].element.dataset.coin)playSound(4);else if(character.el.classList.contains("big")&&a){t[e].element.classList.add("destroying");for(var s=1;s<=4;s++){var o=document.createElement("div");o.classList.add("break","break-"+s),t[e].element.appendChild(o)}setTimeout((function(){t[e].element.remove()}),700),playSound(3)}else t[e].element.classList.add("hit-block-animation"),i||playSound(4);setTimeout((function(){t[e].element.classList.remove("hit-block-animation"),t[e].element.classList.contains("coin-block-animation")&&(t[e].element.classList.remove("coin-block-animation"),t[e].element.classList.add("coin-block-animation2"),setTimeout((function(){t[e].element.classList.remove("coin-block-animation2")}),600))}),300)}return"break"}};for(var o in t){if("break"===s(o))break}}}else character.jump.isJumping=!1;else{if(character.position.y>0){var l=!0,m=function(e){if("bottom"===t[e].direction.y&&"x"===t[e].direction.must)if(t[e].element.classList.contains("enemy")){if(t[e].element.classList.contains("goomba")&&!t[e].element.classList.contains("killed")&&(addScore(100,0,0,enemies[t[e].element.dataset.index]),character.jump.lock=!1,character.jump.jumpPos=0,jump("very-small",!0),t[e].element.classList.add("killed"),playSound(19),setTimeout((function(){t[e].element.remove()}),1e3)),t[e].element.classList.contains("koopa")&&!t[e].element.classList.contains("killed")){var a=enemies[t[e].element.dataset.index];character.jump.lock=!1,character.jump.jumpPos=0,jump("very-small",!0),t[e].element.classList.remove("returning"),t[e].element.classList.contains("in-lack")&&!t[e].element.classList.contains("in-lack-running")?(enemies[t[e].element.dataset.index].walk.direction=t[e].direction.x,t[e].element.classList.add("in-lack-running"),playSound(12),addScore(400,0,0,enemies[t[e].element.dataset.index])):(a.timeouts.stopLack&&clearTimeout(a.timeouts.stopLack),t[e].element.classList.contains("in-lack-running")&&t[e].element.classList.remove("in-lack-running"),a.timeouts.stopLack=setTimeout((function(){t[e].element.classList.contains("killed")||t[e].element.classList.contains("in-lack-running")||(t[e].element.classList.add("returning"),a.timeouts.stopLack=setTimeout((function(){t[e].element.classList.contains("killed")||t[e].element.classList.contains("in-lack-running")||(t[e].element.classList.remove("in-lack"),t[e].element.classList.remove("returning"))}),2e3))}),5e3),t[e].element.classList.add("in-lack"),playSound(12),addScore(100,0,0,enemies[t[e].element.dataset.index]))}}else l=!1};for(var u in t)m(u);if(l){var h=0;character.jump.jumpPos>15&&(h=e/character.jump.jumpPos/40),character.jump.jumpPos-=e/(70-character.jump.max)-character.jump.jumpPos/40-h,character.position.y-=e/(70-character.jump.max)-character.jump.jumpPos/40-h,character.jump.lock=!0}else character.position.y=6.66667*Math.round(character.position.y/6.66667),character.jump.jumpPos=0,character.jump.lock=!1}else character.jump.lock=!1,character.jump.isJumping=!1,character.jump.jumpPos=0,character.position.y<0&&(character.position.y=0);character.el.classList.remove("jump")}if(character.walk.isWalking){character.el.classList.add("walk");var p=e/100;if("high"===character.walk.speed&&(p=e/60),"very-slow"===character.walk.speed&&(p=e/160),"right"===character.walk.direction){var d=!0;for(var g in t)"right"!==t[g].direction.x||"y"!==t[g].direction.must||t[g].isCharacterUpper||(d=!1);d&&(character.position.x+=p)}else{var k=!0;for(var f in t)"left"!==t[f].direction.x||"y"!==t[f].direction.must||t[f].isCharacterUpper||(k=!1);k&&(character.position.x-=p)}}else character.el.classList.remove("walk");"right"===character.walk.direction?character.el.style.transform="translate(".concat(parseFloat(character.position.x),"vh, -").concat(parseFloat(character.position.y),"vh)"):character.el.style.transform="translate(".concat(parseFloat(character.position.x),"vh, -").concat(parseFloat(character.position.y),"vh) rotateY(-180deg)")}setInterval((function(){requestAnimationFrame(update)}),1e3/character.fps);var time=document.querySelector(".ui .time");function updateTime(){var e=time.textContent;e>0?time.textContent=(--e).toString().padStart(3,"0"):character.timeouts.timer&&clearInterval(character.timeouts.timer)}function isElementInViewport(e){var t=e.getBoundingClientRect(),a=window.innerHeight||document.documentElement.clientHeight,i=window.innerWidth||document.documentElement.clientWidth;i+=.2*i;var n=t.top>=0&&t.left>=0&&t.bottom<=a&&t.right<=i,c=t.top<a&&t.bottom>0&&t.left<i&&t.right>0,r=n||c;return r?e.classList.add("animate"):e.classList.remove("animate"),r}function addScore(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:character;character.score.number+=e,character.score.el.textContent=character.score.number.toString().padStart(6,"0"),i.el.classList.contains("big")&&(a+=6.66);var n=document.createElement("div");n.classList.add("score-tooltip"),n.textContent=e;var c=character.position.x+t+4*Math.random()-2,r=6.66667*Math.round((i.position.y+a)/6.66667);n.style.transform="translate(".concat(parseFloat(c),"vh, -").concat(parseFloat(r),"vh)"),setTimeout((function(){world.appendChild(n),setTimeout((function(){n.remove()}),500)}),300+100*Math.random()-50)}function getCollisions(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e,i=".enemy, .block, .block-hard, .block-ques, .hole, .flag-pole, .pipe";e.classList.contains("character")&&(i+=",.collide");var n=document.querySelectorAll(i),c=[],r=a.getBoundingClientRect(),s=r.left+r.width/2,o=r.top+r.height/2,l=0;return a.classList.contains("big")&&(o=r.top+.75*r.height),a.classList.contains("character")&&(l+=.25*r.width,r.width=.96*r.width),n.forEach((function(a){if(a!==e&&!a.classList.contains("killed")&&!a.classList.contains("killing")&&!a.classList.contains("destroying")){var i=a.getBoundingClientRect(),n=i.left+i.width/2,m=i.top+i.height/2,u=Math.abs(s-n),h=Math.abs(o-m),p=Math.sqrt(u*u+h*h);a.classList.contains("enemy")&&16==a.dataset.index&&t&&(console.log(a),console.log(i.bottom),console.log(r.top));var d=0;if(a.classList.contains("in-lack")&&(d+=.43*i.height),r.left+l<i.right&&r.right>i.left&&r.top<i.bottom+.1*i.height&&r.bottom+1>i.top+d){var g={x:r.left<i.left?"right":"left",y:r.top<i.top?"bottom":"top"},k=Math.min(r.bottom,i.bottom)-Math.max(r.top,i.top),f=Math.min(r.right,i.right)-Math.max(r.left,i.left);g.must=k>f?"y":"x",c.push({element:a,direction:g,distance:p,isCharacterUpper:o<i.top})}}})),c.sort((function(e,t){return e.distance-t.distance})),c}function stopWalking(){var e=window.character;e.timeouts.stopWalking&&clearTimeout(e.timeouts.stopWalking),e.walk.isStopWalking=!0,e.timeouts.stopWalking=setTimeout((function(){e.walk.isKeyDown||(e.walk.isWalking=!1),e.walk.isStopWalking=!1}),100)}function jump(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"high",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];character.jump.max=30,"small"===e&&(character.jump.max=17),"very-small"===e&&(character.jump.max=8),character.jump.lock||(character.jump.isJumping=!0,t||("small"===e||"very-small"===e?playSound(10):playSound(11)))}function goToLeft(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];character.walk.isStopWalking&&"right"===character.walk.direction&&(Date.now()>character.walk.sideChangeTime+1e3||"high"===character.walk.speed)?(character.el.classList.add("changing-side"),character.walk.isStopWalking=!1,setTimeout((function(){character.walk.sideChangeTime=Date.now(),character.el.classList.remove("changing-side"),character.walk.direction="left"}),200)):"right"===character.walk.direction&&(character.walk.sideChangeTime=Date.now(),character.walk.direction="left"),character.walk.isKeyDown=!0,character.walk.isWalking=!0,e?character.walk.isWalkingGamepad=!0:(character.timeouts.startWalking&&clearTimeout(character.timeouts.startWalking),character.timeouts.startWalking=setTimeout((function(){character.walk.isWalking=!0}),25))}function goToRight(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];character.walk.isStopWalking&&"left"===character.walk.direction&&(Date.now()>character.walk.sideChangeTime+1e3||"high"===character.walk.speed)?(character.el.classList.add("changing-side"),character.walk.isStopWalking=!1,setTimeout((function(){character.walk.sideChangeTime=Date.now(),character.el.classList.remove("changing-side"),character.walk.direction="right"}),200)):"left"===character.walk.direction&&(character.walk.sideChangeTime=Date.now(),character.walk.direction="right"),character.walk.isKeyDown=!0,character.walk.isWalking=!0,e?character.walk.isWalkingGamepad=!0:(character.timeouts.startWalking&&clearTimeout(character.timeouts.startWalking),character.timeouts.startWalking=setTimeout((function(){character.walk.isWalking=!0}),25))}function getDistance(e,t){var a=e.getBoundingClientRect();return(t.getBoundingClientRect().left-a.left)/window.innerHeight*100}character.timeouts.timer=setInterval(updateTime,1e3);
"use strict";document.addEventListener("keydown",(function(e){var t=window.character;"ArrowLeft"!==e.key&&"a"!==e.key.toLowerCase()||(e.preventDefault(),goToLeft()),"ArrowRight"!==e.key&&"d"!==e.key.toLowerCase()||(e.preventDefault(),goToRight())," "===e.key&&(e.preventDefault(),jump()),"Shift"===e.key&&(e.preventDefault(),t.walk.speed="high",t.el.classList.add("high-speed"))})),document.addEventListener("keyup",(function(e){"ArrowLeft"!==e.key&&"ArrowRight"!==e.key&&"a"!==e.key.toLowerCase()&&"d"!==e.key.toLowerCase()||character.walk.isWalking&&character.walk.isKeyDown&&(e.preventDefault(),character.walk.isKeyDown=!1,stopWalking()),"Shift"===e.key&&(e.preventDefault(),character.walk.speed="slow",character.el.classList.remove("high-speed"))})),console.log("test");
"use strict";function _createForOfIteratorHelper(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){i=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(i)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}if("getGamepads"in navigator){var gameLoop=function e(){var t,r=_createForOfIteratorHelper(navigator.getGamepads());try{for(r.s();!(t=r.n()).done;){var n=t.value;n&&processGamepadInput(n)}}catch(e){r.e(e)}finally{r.f()}setTimeout((function(){requestAnimationFrame(e)}),25)},processGamepadInput=function(e){var t=window.character;(e.buttons[0].pressed||e.buttons[1].pressed)&&console.log("fire"),e.buttons[3].pressed&&jump("small"),e.buttons[2].pressed&&jump(),e.buttons[5].pressed||e.buttons[7].pressed||e.buttons[10].pressed?(t.walk.speed="high",t.el.classList.add("high-speed")):(t.walk.speed="slow",t.el.classList.remove("high-speed")),e.buttons[15].pressed&&goToRight(!0),e.buttons[14].pressed&&goToLeft(!0);var r=e.axes[0];Math.abs(r)>.2?((!e.buttons[5].pressed||e.buttons[7].pressed||e.buttons[10].pressed)&&Math.abs(r)<.5&&(t.walk.speed="very-slow"),r<0?goToLeft(!0):goToRight(!0)):t.walk.isWalkingGamepad&&(stopWalking(),t.walk.isKeyDown=!1,t.walk.isWalkingGamepad=!1)};window.addEventListener("gamepadconnected",(function(e){var t=e.gamepad;document.querySelector(".controls").classList.add("has-gamepad"),console.log("Gamepad connected:",t.id)})),window.addEventListener("gamepaddisconnected",(function(e){var t=e.gamepad;document.querySelector(".controls").classList.add("has-gamepad"),console.log("Gamepad disconnected:",t.id)})),gameLoop()}
"use strict";var cLeft=document.querySelector(".controls .c-left"),cRight=document.querySelector(".controls .c-right"),cTop=document.querySelector(".controls .c-top"),cBottom=document.querySelector(".controls .c-bottom"),cA=document.querySelector(".controls .c-a"),cB=document.querySelector(".controls .c-b"),cC=document.querySelector(".controls .c-c"),cD=document.querySelector(".controls .c-d");function handleTouchUp(t){t.preventDefault(),character.walk.isKeyDown=!1,stopWalking()}function isTouchscreenDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}cRight.addEventListener("touchstart",(function(t){t.preventDefault(),cRight.classList.add("touching"),character.walk.isKeyDown=!0,goToRight()})),cRight.addEventListener("touchend",(function(t){t.preventDefault(),cRight.classList.remove("touching"),handleTouchUp(t)})),cLeft.addEventListener("touchstart",(function(t){t.preventDefault(),cLeft.classList.add("touching"),goToLeft()})),cLeft.addEventListener("touchend",(function(t){t.preventDefault(),cLeft.classList.remove("touching"),handleTouchUp(t)})),cTop.addEventListener("touchstart",(function(t){t.preventDefault(),cTop.classList.add("touching")})),cTop.addEventListener("touchend",(function(t){t.preventDefault(),cTop.classList.remove("touching")})),cBottom.addEventListener("touchstart",(function(t){t.preventDefault(),cBottom.classList.add("touching")})),cBottom.addEventListener("touchend",(function(t){t.preventDefault(),cBottom.classList.remove("touching")})),cA.addEventListener("touchstart",(function(t){t.preventDefault(),cA.classList.add("touching")})),cA.addEventListener("touchend",(function(t){t.preventDefault(),cA.classList.remove("touching")})),cB.addEventListener("touchstart",(function(t){t.preventDefault(),cB.classList.add("touching"),jump("small")})),cB.addEventListener("touchend",(function(t){t.preventDefault(),cB.classList.remove("touching")})),cC.addEventListener("touchstart",(function(t){t.preventDefault(),cC.classList.add("touching"),character.walk.isSpeedTouchDown=!0,setTimeout((function(){character.walk.isSpeedTouchDown&&(character.walk.speed="high",character.el.classList.add("high-speed"))}),250)})),cC.addEventListener("touchend",(function(t){t.preventDefault(),cC.classList.remove("touching"),character.walk.isSpeedTouchDown=!1,character.walk.speed="slow",character.el.classList.remove("high-speed")})),cD.addEventListener("touchstart",(function(t){t.preventDefault(),cD.classList.add("touching"),jump()})),cD.addEventListener("touchend",(function(t){t.preventDefault(),cD.classList.remove("touching")})),isTouchscreenDevice()&&document.querySelector(".controls").classList.add("active");
"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,o){var a=e&&e.prototype instanceof p?e:p,i=Object.create(a.prototype),s=new E(o||[]);return n(i,"_invoke",{value:_(t,r,s)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var l={};function p(){}function h(){}function y(){}var v={};u(v,a,(function(){return this}));var d=Object.getPrototypeOf,m=d&&d(d(A([])));m&&m!==e&&r.call(m,a)&&(v=m);var w=y.prototype=p.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function o(n,a,i,s){var u=f(t[n],t,a);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==_typeof(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){o("next",t,i,s)}),(function(t){o("throw",t,i,s)})):e.resolve(l).then((function(t){c.value=t,i(c)}),(function(t){return o("throw",t,i,s)}))}s(u.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function _(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var s=x(i,r);if(s){if(s===l)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function x(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),l;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,l;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function A(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return h.prototype=y,n(w,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:h,configurable:!0}),h.displayName=u(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,s,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},b(g.prototype),u(g.prototype,i,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new g(c(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},b(w),u(w,s,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=A,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:A(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function asyncGeneratorStep(t,e,r,n,o,a,i){try{var s=t[a](i),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){asyncGeneratorStep(a,n,o,i,s,"next",t)}function s(t){asyncGeneratorStep(a,n,o,i,s,"throw",t)}i(void 0)}))}}var soundFiles=["/assets/sfx/smb_1-up.wav","/assets/sfx/smb_bowserfalls.wav","/assets/sfx/smb_bowserfire.wav","/assets/sfx/smb_breakblock.wav","/assets/sfx/smb_bump.wav","/assets/sfx/smb_coin.wav","/assets/sfx/smb_fireball.wav","/assets/sfx/smb_fireworks.wav","/assets/sfx/smb_flagpole.wav","/assets/sfx/smb_gameover.wav","/assets/sfx/smb_jump-small.wav","/assets/sfx/smb_jump-super.wav","/assets/sfx/smb_kick.wav","/assets/sfx/smb_mariodie.wav","/assets/sfx/smb_pause.wav","/assets/sfx/smb_pipe.wav","/assets/sfx/smb_powerup.wav","/assets/sfx/smb_powerup_appears.wav","/assets/sfx/smb_stage_clear.wav","/assets/sfx/smb_stomp.wav","/assets/sfx/smb_vine.wav","/assets/sfx/smb_warning.wav","/assets/sfx/smb_world_clear.wav"];function loadSound(t){return _loadSound.apply(this,arguments)}function _loadSound(){return(_loadSound=_asyncToGenerator(_regeneratorRuntime().mark((function t(e){var r,n;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return r=t.sent,t.next=5,r.arrayBuffer();case 5:return n=t.sent,t.next=8,audioContext.decodeAudioData(n);case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var audioContext=new(window.AudioContext||window.webkitAudioContext),audioBuffers=[],activeSources=[];function stopSource(t){t.stop();var e=activeSources.indexOf(t);-1!==e&&activeSources.splice(e,1)}function playSound(t){if(t>=0&&t<audioBuffers.length){activeSources.forEach(stopSource);var e=audioContext.createBufferSource();e.buffer=audioBuffers[t],e.connect(audioContext.destination),e.start(),activeSources.push(e)}}Promise.all(soundFiles.map((function(t){return loadSound(t)}))).then((function(t){audioBuffers.push.apply(audioBuffers,_toConsumableArray(t))}));
//# sourceMappingURL=scripts.js.map
